
- topic 이란 데이터가 들어갈 수 있는 곳
- table 폴더나 파일시스템과 비슷한 역할을 한다
- 하나의 토픽은 여러개의 파티션으로 구성할 수 있다
- 토픽에 컨슈머가 붙게 되면 가장 오래된 순서대로 가져가게 된다
- 데이터가 들어오지 않으면 컨슈머가 기다린다 (데이터는 삭제되지 않는다)
- 파티션에 남은 데이터는 새로운 컨슈머가 들어왔을 때 다시 가져간다 (컨슈머가 다른 경우)
- 클릭 로그 시각화 하기 위해 elastic search에 저장하기도 한다
- 클릭 로그를 백업하기 위해 hadoop에 저장하기도 한다
- 파티션이 하나 더 늘어났을 때
- 데이터를 보낼 때 키를 지정 가능
- 디폴트로는 라운드 로빈으로 지정
- 파티션 늘리는건 가능하지만 줄이는 것은 불가능
- 파티션 늘리면 컨슈머 분산이 가능

### 토픽 이름 제약 조건
- 빈 문자렬 토픽 이름 지원 X
- 마침표 하나나 두개로만 생성 불가
- 249자 미만으로 설정
- 영어 대,소문자와 숫자 0~9 그리고 마침표(.), 언더바(`_`), 하이픈(-) 조합으로 생성 가능
- 이외의 문자열로 구성된 이름 사용 불가 
- 카프카 내부 로직 관리 목적으로 사용되는 2개의 토픽과 동일하게 불가
  (`__consumer_offsets`, `__transaction_state`)
- .과 `_`가 동시에 들어가면 안됨

### 작명 예시
- <환경>.<팀명>.<애플리케이션명>.<메시지타입>
  (prod.marketing-team.sms-platform.json)
- <프로젝트명>.<서비스명>.<환경>.<이벤트명>
  (commerce.payment.prd.notification)


## Topic을 생성하는 2가지 방법
- kafka-topics.sh을 이용한 방법
```linux
bin/kafka-topics.sh --create \
--bootstrap-server my-kafka:9092 \
--topic hello.kafka
```

- 컨슈머, 프로듀서가 브로커에 생성되지 않은 토픽에 대해서 데이터를 요청할 때
 (autoCreate 옵션이 필요, 브로커 기본 옵션으로 생성)
